var m=Object.defineProperty;var u=(o,t,e)=>t in o?m(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>(u(o,typeof t!="symbol"?t+"":t,e),e);class f{constructor(){return this.state=this.state??{},this.props=this.props??{},this.listeners={},new Proxy(this,{set:(t,e,n)=>{if(e in t.state){const s=t.state[e];return t.state[e]=n,t.applyProperty(e,n,s),!0}if(e in t.props){const s=t.props[e];return t.props[e]=n,t.applyProperty(e,n,s),!0}return t[e]=n,!1},get:(t,e)=>e in t.state?t.state[e]:e in t.props?t.props[e]:t[e]})}watch(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}applyProperty(t,e,n){this.listeners[t]&&this.listeners[t].forEach(s=>s(e,n))}onChange(t,e){this.watch(t,e)}}function C(o){const t=/\[([\w-:]+)((?:\s+\w+\s*=\s*"[^"]*")*)(\](.*?)\[\/\1\]|\s*\/\])/gs;return[...o.matchAll(t)].map(e=>{const[n,s,i,,r]=e;return{component:n,tag:s,attrs:i,content:r}})}const g="############$$$$$$$$############";function w(...o){console.log(...o)}const p={getComponentsFromText:C,LOG:w,tagSplit:g};class c extends f{constructor(){super(...arguments);l(this,"number",new Date().getTime());l(this,"manager");l(this,"parent");l(this,"children",[]);l(this,"el");l(this,"$id")}nextId(){return++this.number}getId(){return this.$id||(this.$id=this.nextId()),this.$id}applyComponent(e){let n=document.createElement("template");e=e.trim();let i=p.getComponentsFromText(e).map(r=>(e=e.split(r.component).join(p.tagSplit),this.manager.getComponentByName(r.tag,r.attrs,this)));if(i.length){let r="";e.split(tagSplit).forEach((d,h)=>{r+=d,i[h]&&(r+='<span id="sokeio-component-'+i[h].getId()+'">'+i[h].getId()+"</span>")}),e=r,this.children=i}return n.innerHTML=e,n.content.firstChild}renderComponent(){let e=this.render();if(this.el||(this.el=document.createElement("div")),this.el.innerHTML=e,this.el.children.length!==1){let n=this.el.children[0];this.el.parentNode.insertBefore(n,this.el),this.el.remove(),this.el=n,this.el.setAttribute("data-sokeio-id",this.getId()),this.applyComponent(this.el.innerHTML),this.children.forEach(s=>{if(!s)return;s.parent=this,s.renderComponent();let i=this.el.querySelector("#sokeio-component-"+s.getId());i.parentNode.insertBefore(s.el,i),i.remove()})}else this.el.innerHTML="[NOT ONE COMPONENT]"}render(){return""}run(){}ready(){}}class a extends c{constructor(){super(...arguments);l(this,"components",{})}registerComponent(e,n){this.components[e]=n}getComponentByName(e,n,s){if(!e||!this.components[e])return console.warn({name:e,$attrs:n,parent:s,isAddChild}),null;let i=new this.components[e];return i.manager=this,i.parent=s,i}render(){return""}}window.sokeio={Application:a,Component:c};window.sokeioApp=new a;
